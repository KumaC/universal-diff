/*! diff-merge v1.0.1 | nighca(nighca@live.cn) | Apache License(2.0) */
!function(t){var r=0,n=1,e=2,f=3,s=-1,l=0,u=function(t,n){var i=t.length,s=n.length,l=i+s,u=Array.apply(null,{length:s+i+1}).map(function(){return[]}),a=[],c=-1;a[l+1]=0;for(var o=0;l>=o&&-1===c;o++)for(var h,p,g,j=-o;o>=j&&-1===c;j+=2){for(j===-o||j!==o&&a[j-1+l]<a[j+1+l]?(h=a[j+1+l],g=f):(h=a[j-1+l]+1,g=e),p=h-j,u[h][p]=g;i>h&&s>p&&t[h]===n[p];)h++,p++,u[h][p]=r;a[j+l]=h,h>=i&&p>=s&&(c=o)}return u},a=u,c=function(t,i,u){for(var a=t.length,c=i.length,o=[],h=[],p=a,g=c;p>0||g>0;)switch(u[p][g]){case r:o.unshift(t[p-1]),h.unshift(l),p-=1,g-=1;break;case n:o.unshift(t[p-1]),h.unshift(i[g-1]),p-=1,g-=1;break;case e:o.unshift(t[p-1]),h.unshift(s),p-=1,g-=0;break;case f:o.unshift(s),h.unshift(i[g-1]),p-=0,g-=1}return{src:o,target:h}},o=function(t,r){var n,e,f,u=a(t,r),o=c(t,r,u),h=o.src,p=o.target,g=p.length,v=function(t){return t!==s},m=[];for(i=g-1;i>=0;){for(j=i;p[j]!==l&&j>=0;j--);i>j&&(n=h.slice(0,j+1).filter(v).length,e=h.slice(j+1,i+1).filter(v).length,f=p.slice(j+1,i+1).filter(v),m.unshift(f.length?[n,e,f]:[n,e])),i=j-1}return m},h=function(t,r,n){n="string"==typeof n?n:"";var i=t.split(n),e=r.split(n),f=o(i,e);return f.forEach(function(t){t[2]&&(t[2]=t[2].join(n))}),{splitter:n,diff:f}},p=function(t,r){for(var n,i=r.splitter,e=r.diff,f=t.split(i),s=e.length-1;s>=0;s--)n=e[s],f.splice.apply(f,n);return f.join(i)};t.diff={coreCompare:a,compare:o,compareStr:h,mergeStr:p}}(this);